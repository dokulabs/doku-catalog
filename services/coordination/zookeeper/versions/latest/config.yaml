version: latest
image: zookeeper:3.8
port: 2181
protocol: tcp

ports:
  - "2181:2181"   # Client port
  - "2888:2888"   # Follower port
  - "3888:3888"   # Election port

environment:
  ZOO_MY_ID: "1"
  ZOO_SERVERS: "server.1=localhost:2888:3888;2181"
  ZOO_STANDALONE_ENABLED: "true"
  ZOO_ADMINSERVER_ENABLED: "false"

volumes:
  - /data
  - /datalog

resources:
  memory_min: 256m
  memory_max: 1g
  cpu_min: "0.25"
  cpu_max: "1.0"

healthcheck:
  test: ["CMD", "zkServer.sh", "status"]
  interval: 30s
  timeout: 10s
  retries: 3

dependencies_v2: []
